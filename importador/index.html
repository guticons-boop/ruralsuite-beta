<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check-in Pro | RuralGesto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fdfdfb; color: #1e293b; }
        .serif { font-family: 'DM+Serif+Display', serif; }
        .tab-active { border-bottom: 3px solid #065f46; color: #065f46; }
    </style>
</head>
<body class="p-4 md:p-8 pb-32">

    <div class="max-w-4xl mx-auto">
        <header class="flex items-center gap-4 mb-10">
            <button onclick="location.href='../hub/index.html'" class="p-4 bg-white rounded-3xl shadow-sm border border-gray-100"><i data-lucide="arrow-left"></i></button>
            <div>
                <h2 class="serif text-3xl italic text-emerald-900 font-bold">Gestión de Entrada</h2>
                <p class="text-[9px] font-black uppercase tracking-widest text-emerald-600 italic">El Rinconcito de Matarraña</p>
            </div>
        </header>

        <div class="flex border-b border-slate-200 mb-8">
            <button onclick="switchMode('online')" id="btn-online" class="flex-1 py-4 text-[10px] font-black uppercase tracking-widest tab-active">Check-in Online (Cliente)</button>
            <button onclick="switchMode('import')" id="btn-import" class="flex-1 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400">Importar Check-in Scan</button>
        </div>

        <div id="view-online" class="space-y-6">
            <div class="bg-white p-8 rounded-[50px] border border-gray-100 shadow-sm">
                <h3 class="serif text-2xl italic font-bold mb-6 text-slate-900">Enviar Registro al Cliente</h3>
                <div class="space-y-4">
                    <div>
                        <label class="text-[9px] font-black uppercase text-slate-400 ml-4 mb-2 block">Seleccionar Alojamiento</label>
                        <select id="house-select" class="w-full p-5 bg-slate-50 border-none rounded-[25px] text-sm font-bold outline-none">
                            <option>La Tirolina</option>
                            <option>La Ermita</option>
                            <option>Los Almendros</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-[9px] font-black uppercase text-slate-400 ml-4 mb-2 block">Teléfono del Huésped</label>
                        <input type="tel" id="guest-phone" placeholder="600 000 000" class="w-full p-5 bg-slate-50 border-none rounded-[25px] text-sm font-bold outline-none">
                    </div>
                    <button onclick="generateLink()" class="w-full py-6 bg-emerald-900 text-white rounded-[30px] font-black text-[10px] uppercase tracking-widest shadow-xl flex items-center justify-center gap-3">
                        <i data-lucide="send"></i> Generar y Enviar por WhatsApp
                    </button>
                </div>
            </div>

            <div id="link-result" class="hidden p-6 bg-emerald-50 rounded-[35px] border border-emerald-100 animate-pulse text-center">
                <p class="text-[10px] font-black uppercase text-emerald-600 mb-2 italic">Enlace generado listo para enviar:</p>
                <p class="text-xs font-mono font-bold text-slate-600">ruralgesto.com/checkin/el-rinconcito-t678</p>
            </div>
        </div>

        <div id="view-import" class="hidden space-y-6">
            <div class="bg-white p-10 rounded-[50px] border-2 border-dashed border-slate-200 text-center">
                <input type="file" id="file-input" class="hidden" onchange="processFile(this)">
                <div onclick="document.getElementById('file-input').click()" class="cursor-pointer group">
                    <div class="w-16 h-16 bg-blue-50 text-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition">
                        <i data-lucide="file-text"></i>
                    </div>
                    <p class="text-xs font-black uppercase italic tracking-widest text-slate-700">Subir Listado Check-in Scan</p>
                    <p class="text-[10px] text-slate-400 mt-2 italic">Extraer datos de marketing y agenda automáticamente</p>
                </div>
            </div>
            
            <div id="import-preview" class="hidden p-8 bg-white border border-gray-100 rounded-[50px] shadow-sm">
                <p class="text-[10px] font-black uppercase text-blue-600 mb-4 italic text-center">Previsualización de datos</p>
                <div class="grid grid-cols-2 gap-4 text-sm mb-6">
                    <div class="bg-slate-50 p-4 rounded-2xl"><p class="text-[8px] font-black text-slate-400 uppercase">Huésped</p><p class="font-bold">María García</p></div>
                    <div class="bg-slate-50 p-4 rounded-2xl"><p class="text-[8px] font-black text-slate-400 uppercase">Teléfono</p><p class="font-bold">655 XXX XXX</p></div>
                </div>
                <button onclick="location.href='../calendar/index.html'" class="w-full py-5 bg-blue-900 text-white rounded-3xl font-black text-[10px] uppercase tracking-widest italic">Confirmar e Importar</button>
            </div>
        </div>

    </div>

    <script>
        lucide.createIcons();

        function switchMode(mode) {
            document.getElementById('view-online').classList.add('hidden');
            document.getElementById('view-import').classList.add('hidden');
            document.getElementById('btn-online').classList.remove('tab-active', 'text-emerald-900');
            document.getElementById('btn-import').classList.remove('tab-active', 'text-emerald-900');
            document.getElementById('btn-online').classList.add('text-slate-400');
            document.getElementById('btn-import').classList.add('text-slate-400');

            document.getElementById('view-' + mode).classList.remove('hidden');
            document.getElementById('btn-' + mode).classList.add('tab-active', 'text-emerald-900');
            document.getElementById('btn-' + mode).classList.remove('text-slate-400');
        }

        function generateLink() {
            const house = document.getElementById('house-select').value;
            const phone = document.getElementById('guest-phone').value;
            if(!phone) return alert("Escribe el teléfono del cliente");
            
            document.getElementById('link-result').classList.remove('hidden');
            const message = `Hola! Soy Toni de El Rinconcito de Matarraña. Para agilizar tu entrada a ${house}, puedes realizar el check-in online aquí: https://ruralgesto.com/checkin/test`;
            window.open(`https://wa.me/34${phone}?text=${encodeURIComponent(message)}`);
        }

        function processFile(input) {
            if(input.files && input.files[0]) {
                document.getElementById('import-preview').classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
