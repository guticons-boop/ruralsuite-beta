<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Pro | RuralGesto</title>
    <script src="https://cdn.tailwindcss.com"></script><script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fdfdfb; }
        .serif { font-family: 'DM+Serif+Display', serif; }
        .tab-btn.active { background-color: #2563eb; color: white; }
        #preview-img { width: 100%; height: 200px; object-fit: cover; border-radius: 20px; display: none; }
    </style>
</head>
<body class="p-4 md:p-8 pb-32">
    <div class="max-w-4xl mx-auto">
        <header class="flex items-center gap-4 mb-10">
            <button onclick="location.href='../hub/index.html'" class="p-4 bg-white rounded-3xl shadow-sm border border-gray-100"><i data-lucide="arrow-left"></i></button>
            <div>
                <h2 class="serif text-3xl italic text-blue-950 font-bold">Marketing & IA</h2>
                <p class="text-[9px] font-black uppercase tracking-widest text-blue-600">Creatividad para RuralGesto</p>
            </div>
        </header>

        <div class="grid grid-cols-3 gap-2 bg-blue-50 p-1.5 rounded-[30px] mb-8 border border-blue-100">
            <button onclick="switchTab('pre')" id="tab-pre" class="tab-btn active py-4 rounded-[25px] font-black text-[9px] uppercase tracking-widest">Predefinidas</button>
            <button onclick="switchTab('custom')" id="tab-custom" class="tab-btn py-4 rounded-[25px] font-black text-[9px] uppercase tracking-widest text-blue-900">Editor Pro</button>
            <button onclick="switchTab('ia')" id="tab-ia" class="tab-btn py-4 rounded-[25px] font-black text-[9px] uppercase tracking-widest text-blue-900">Generar IA</button>
        </div>

        <div id="view-custom" class="space-y-6">
            <div class="bg-white p-8 rounded-[50px] border border-slate-100 shadow-sm">
                <div class="space-y-4">
                    <input type="text" id="camp-title" placeholder="Título de la Campaña..." class="w-full p-4 bg-slate-50 rounded-2xl text-xs font-bold outline-none border-none">
                    
                    <div id="image-container" class="relative group">
                        <img id="preview-img" src="" alt="Previsualización">
                        <div id="placeholder-box" class="w-full h-32 bg-slate-100 rounded-3xl flex flex-col items-center justify-center border-2 border-dashed border-slate-200">
                            <i data-lucide="image-plus" class="text-slate-400 mb-2"></i>
                            <p class="text-[8px] font-black uppercase text-slate-400">Sin imagen seleccionada</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-3">
                        <label class="cursor-pointer flex-1 p-4 bg-blue-50 rounded-2xl text-center border border-blue-100 hover:bg-blue-100 transition">
                            <input type="file" id="file-upload" class="hidden" accept="image/*" onchange="handleUpload(event)">
                            <i data-lucide="upload-cloud" class="w-4 h-4 mx-auto text-blue-600 mb-1"></i>
                            <p class="text-[7px] font-black uppercase text-blue-800">Fototeca</p>
                        </label>
                        
                        <button onclick="useGuiaImage()" class="flex-1 p-4 bg-emerald-50 rounded-2xl text-center border border-emerald-100 hover:bg-emerald-100 transition">
                            <i data-lucide="book-open" class="w-4 h-4 mx-auto text-emerald-600 mb-1"></i>
                            <p class="text-[7px] font-black uppercase text-emerald-800">De la Guía</p>
                        </button>

                        <button onclick="switchTab('ia')" class="flex-1 p-4 bg-purple-50 rounded-2xl text-center border border-purple-100 hover:bg-purple-100 transition">
                            <i data-lucide="wand-2" class="w-4 h-4 mx-auto text-purple-600 mb-1"></i>
                            <p class="text-[7px] font-black uppercase text-purple-800">Usar IA</p>
                        </button>
                    </div>

                    <textarea placeholder="Escribe el mensaje de la oferta..." rows="3" class="w-full p-4 bg-slate-50 rounded-2xl text-xs outline-none border-none"></textarea>
                    
                    <button class="w-full py-6 bg-blue-600 text-white rounded-[30px] font-black text-[10px] uppercase tracking-widest shadow-xl">Lanzar Campaña</button>
                </div>
            </div>
        </div>

        <div id="view-ia" class="hidden space-y-6">
            <div class="bg-slate-900 p-10 rounded-[50px] text-white text-center shadow-2xl">
                <i data-lucide="sparkles" class="w-12 h-12 mx-auto mb-6 text-blue-400"></i>
                <h3 class="serif text-2xl italic mb-4">Generador de Fotos</h3>
                <input type="text" id="ia-prompt" placeholder="Ej: Salón de La Tirolina con nieve fuera..." class="w-full p-5 bg-white/10 rounded-2xl text-xs border border-white/20 mb-4 outline-none">
                <button onclick="generateAI()" class="w-full py-4 bg-blue-600 text-white rounded-2xl font-black text-[9px] uppercase">Crear con IA</button>
            </div>
            <div id="ia-loading" class="hidden text-center p-12 bg-white rounded-[50px] border border-slate-100">
                <div class="animate-spin mb-4 inline-block"><i data-lucide="refresh-cw" class="text-blue-600"></i></div>
                <p class="text-[10px] font-black uppercase text-slate-400 italic">Pintando tu idea...</p>
            </div>
        </div>

        <div id="view-pre" class="hidden grid grid-cols-2 gap-4">
            <div class="bg-white p-6 rounded-[40px] border border-slate-100">
                <h4 class="serif font-bold italic mb-2">Fidelización</h4>
                <p class="text-[9px] text-slate-400 mb-4">10% dto. repetidores</p>
                <button class="w-full py-3 bg-slate-900 text-white rounded-xl text-[8px] font-black uppercase">Usar</button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        function switchTab(tab) {
            document.querySelectorAll('#view-pre, #view-custom, #view-ia').forEach(v => v.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('active', 'text-white');
                b.classList.add('text-blue-900');
            });
            document.getElementById('view-' + tab).classList.remove('hidden');
            document.getElementById('tab-' + tab).classList.add('active', 'text-white');
        }

        // FUNCIÓN DE SUBIDA REAL DESDE FOTOTECA
        function handleUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    showPreview(e.target.result);
                }
                reader.readAsDataURL(file);
            }
        }

        // SIMULAR IMAGEN DE LA GUIA
        function useGuiaImage() {
            const imgGuia = "https://images.unsplash.com/photo-1518780664697-55e3ad937233?auto=format&fit=crop&q=80&w=800";
            showPreview(imgGuia);
            alert("Imagen importada de tu Guía de Bienvenida");
        }

        // SIMULAR IA
        function generateAI() {
            document.getElementById('ia-loading').classList.remove('hidden');
            setTimeout(() => {
                const imgIA = "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&q=80&w=800";
                document.getElementById('ia-loading').classList.add('hidden');
                showPreview(imgIA);
                switchTab('custom');
            }, 2500);
        }

        function showPreview(src) {
            const img = document.getElementById('preview-img');
            const placeholder = document.getElementById('placeholder-box');
            img.src = src;
            img.style.display = 'block';
            placeholder.style.display = 'none';
        }
    </script>
</body>
</html>
