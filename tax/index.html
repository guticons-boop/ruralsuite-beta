<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administración | RuralGesto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fdfdfb; }
        .serif { font-family: 'DM+Serif+Display', serif; }
        .tab-active { border-bottom: 2px solid #1a1a1a; color: #1a1a1a; }
    </style>
</head>
<body class="p-6 md:p-12 pb-32">
    <div class="max-w-5xl mx-auto">
        <header class="flex justify-between items-center mb-16">
            <button onclick="location.href='../hub/index.html'" class="p-5 bg-white rounded-[24px] border border-slate-100 shadow-sm"><i data-lucide="arrow-left"></i></button>
            <div class="flex bg-slate-100 p-1 rounded-2xl">
                <button onclick="setPeriod('sem')" id="btn-sem" class="px-6 py-2 text-[10px] font-black uppercase tracking-widest text-slate-400">Semanal</button>
                <button onclick="setPeriod('mes')" id="btn-mes" class="px-6 py-2 bg-white shadow-sm rounded-xl text-[10px] font-black uppercase tracking-widest text-rose-950 font-bold">Mensual</button>
            </div>
        </header>

        <nav class="flex gap-12 mb-12 border-b border-slate-100">
            <button onclick="tab('resumen')" id="t-resumen" class="tab-active pb-6 text-[10px] font-black uppercase tracking-widest">Resumen</button>
            <button onclick="tab('graficos')" id="t-graficos" class="pb-6 text-[10px] font-black uppercase tracking-widest text-slate-400">Gráficos</button>
            <button onclick="tab('declaracion')" id="t-declaracion" class="pb-6 text-[10px] font-black uppercase tracking-widest text-slate-400">Declaración</button>
        </nav>

        <div id="sec-resumen" class="space-y-8 animate-in fade-in duration-700">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div onclick="toggleDetails('d-ing')" class="bg-white p-12 rounded-[50px] border border-slate-100 cursor-pointer hover:shadow-xl transition-all">
                    <p class="text-[10px] font-black uppercase text-slate-400 mb-4 tracking-[0.2em] italic">Ingresos Brutos</p>
                    <h2 id="total-ingreso" class="serif text-7xl italic text-rose-950">4.580€</h2>
                    <div id="d-ing" class="hidden mt-8 pt-8 border-t border-slate-50 space-y-4">
                        <div class="flex justify-between text-xs"><span>La Tirolina</span><span class="font-bold">1.500€</span></div>
                        <div class="flex justify-between text-xs"><span>La Ermita</span><span class="font-bold">1.200€</span></div>
                        <div class="flex justify-between text-xs"><span>Los Almendros</span><span class="font-bold">1.880€</span></div>
                    </div>
                </div>
                <div onclick="toggleDetails('d-gas')" class="bg-white p-12 rounded-[50px] border border-slate-100 cursor-pointer hover:shadow-xl transition-all">
                    <p class="text-[10px] font-black uppercase text-slate-400 mb-4 tracking-[0.2em] italic">Gastos Operativos</p>
                    <h2 class="serif text-7xl italic text-rose-950">1.120€</h2>
                    <div id="d-gas" class="hidden mt-8 pt-8 border-t border-slate-50 space-y-4">
                        <div class="flex justify-between text-xs"><span>Limpieza y Mantenimiento</span><span class="font-bold">720€</span></div>
                        <div class="flex justify-between text-xs"><span>Suministros (Luz/Agua)</span><span class="font-bold">400€</span></div>
                    </div>
                </div>
            </div>
            <div class="bg-rose-950 p-8 rounded-[40px] text-white flex justify-between items-center shadow-2xl shadow-rose-950/20">
                <div>
                    <h4 class="serif text-2xl italic">Cálculo de IVA (10%)</h4>
                    <p class="text-[9px] font-bold opacity-50 uppercase tracking-widest mt-1 italic">Ajuste automático de impuestos</p>
                </div>
                <input type="checkbox" onchange="iva(this)" class="w-8 h-8 rounded-full accent-white cursor-pointer">
            </div>
        </div>

        <div id="sec-graficos" class="hidden animate-in zoom-in duration-500">
            <div class="bg-white p-16 rounded-[60px] border border-slate-100">
                <h3 class="serif text-4xl italic text-center mb-12 text-rose-950">Reparto de Rentabilidad</h3>
                <div class="max-w-md mx-auto">
                    <canvas id="chartRentabilidad"></canvas>
                </div>
            </div>
        </div>

        <div id="sec-declaracion" class="hidden animate-in slide-in-from-bottom duration-500">
            <div class="bg-white p-12 rounded-[50px] border border-slate-100 space-y-10">
                <h3 class="serif text-4xl italic text-rose-950 italic">Borrador para Gestoría</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="space-y-2">
                        <label class="text-[10px] font-black uppercase text-slate-300 ml-4 tracking-widest">Nombre del Titular</label>
                        <input type="text" class="w-full p-6 bg-slate-50 rounded-[24px] outline-none font-bold" value="Antonio Gutiérrez">
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] font-black uppercase text-slate-300 ml-4 tracking-widest">NIF / CIF</label>
                        <input type="text" class="w-full p-6 bg-slate-50 rounded-[24px] outline-none font-mono" value="12345678Z">
                    </div>
                </div>
                <button class="w-full py-8 bg-rose-950 text-white rounded-full font-black text-[10px] uppercase tracking-[0.4em] shadow-2xl">Exportar Informe Trimestral</button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        function tab(n){
            document.querySelectorAll('[id^="sec-"]').forEach(s => s.classList.add('hidden'));
            document.getElementById('sec-'+n).classList.remove('hidden');
            document.querySelectorAll('[id^="t-"]').forEach(t => t.className = "pb-6 text-[10px] font-black uppercase tracking-widest text-slate-400");
            document.getElementById('t-'+n).className = "tab-active pb-6 text-[10px] font-black uppercase tracking-widest";
            if(n === 'graficos') initChart();
        }
        function toggleDetails(id){ document.getElementById(id).classList.toggle('hidden'); }
        function iva(c){ document.getElementById('total-ingreso').innerText = c.checked ? '5.038€' : '4.580€'; }
        function initChart(){
            const ctx = document.getElementById('chartRentabilidad').getContext('2d');
            if(window.myChart) window.myChart.destroy();
            window.myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['La Tirolina', 'La Ermita', 'Los Almendros'],
                    datasets: [{
                        data: [35, 25, 40],
                        backgroundColor: ['#f8fafc', '#f1f5f9', '#e2e8f0'],
                        borderWidth: 8, borderColor: '#ffffff'
                    }]
                },
                options: { plugins: { legend: { position: 'bottom', labels: { font: { family: 'Plus Jakarta Sans', weight: 'bold', size: 10 } } } } }
            });
        }
    </script>
</body>
</html>
